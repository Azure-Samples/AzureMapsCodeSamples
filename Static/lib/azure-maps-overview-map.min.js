/* MIT License - Copyright (c) Microsoft Corporation. */


!function(e,b){"use strict";var f="default"in b?b.default:b,i=function(){return(i=Object.assign||function(e){for(var a,t=1,r=arguments.length;t<r;t++)for(var o in a=arguments[t])Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o]);return e}).apply(this,arguments)},a=(t.merge=function(e,a){for(var t=window||global,r=0,o=e.split(".");r<o.length;r++){var n=o[r];if(!t[n])return a;t=t[n]}return i(i({},t),a)},t);function t(){}var r=(w.prototype.dispose=function(){var a=this;a.onRemove(),Object.keys(a).forEach(function(e){return a[e]=void 0})},w.prototype.getOverviewMap=function(){return this._overviewMap},w.prototype.getLayers=function(){return this._layers},w.prototype.getOptions=function(){return i({},this._options)},w.prototype.setOptions=function(e){var a=this,t=a._options,r=a._parentMap,o=a._overviewMap,n=!1,i=!1,s=!1;if("boolean"==typeof e.syncBearingPitch&&(t.syncBearingPitch=e.syncBearingPitch,i=n=!0),"boolean"==typeof e.syncZoom&&(t.syncZoom=e.syncZoom,i=n=!0),"boolean"==typeof e.interactive&&(t.interactive=e.interactive,n=!0),n&&a._updateMapUX(),"number"==typeof e.zoom&&(t.zoom=e.zoom,i=!0),"number"==typeof e.zoomOffset&&(t.zoomOffset=e.zoomOffset,i=!0),i&&r&&o){var l=r.getCamera(),p={center:l.center,zoom:t.syncZoom?Math.min(Math.max(l.zoom+t.zoomOffset,0),24):t.zoom,bearing:0,pitch:0};t.syncBearingPitch&&(p.bearing=l.bearing,p.pitch=l.pitch),o.setCamera(p)}if(e.mapStyle&&(t.mapStyle=e.mapStyle,o&&o.setStyle({style:t.mapStyle})),"boolean"==typeof e.showToggle&&(t.showToggle=e.showToggle,a._btn&&(a._btn.style.display=t.showToggle?"":"none")),"boolean"==typeof e.minimized&&(t.minimized=e.minimized,s=!0),"number"==typeof e.width&&(t.width=e.width,s=!0),"number"==typeof e.height&&(t.height=e.height,s=!0),s&&a._setBtnState(),e.markerOptions&&(Object.assign(t.markerOptions,e.markerOptions),a._marker&&a._marker.setOptions(t.markerOptions)),e.overlay&&(t.overlay=e.overlay,a._area&&a._area.setProperties({visible:"area"===t.overlay}),a._marker&&a._marker.setOptions({visible:"marker"===t.overlay}),a._updateOverlay()),e.style&&(0===t.style.indexOf("auto")&&r&&r.events.remove("styledata",a._mapStyleChanged),t.style=e.style,a._mapContainer)){var v=a._styleColor();a._mapContainer.style.backgroundColor=v,a._btn.style.backgroundColor=v}if(e.shape){t.shape=e.shape;var c=a._mapContainer.classList;"round"===t.shape?c.add("azmaps-overviewMap-round"):c.contains("azmaps-overviewMap-round")&&c.remove("azmaps-overviewMap-round")}"boolean"==typeof e.visible&&(t.visible=e.visible,a._container&&(a._container.style.display=t.visible?"":"none",a._overviewMap.resize()))},w.prototype.onAdd=function(e,a){var t=this,r=t._options;t._parentMap=e;var o=t._icon.replace("{color}","Gray"),n=t._icon.replace("{color}","DeepSkyBlue"),i=document.createElement("style");i.innerHTML=t._btnCss.replace(/{icon}/g,o).replace(/{iconHover}/g,n),document.body.appendChild(i);var s=t._styleColor(),l=w._getAriaLabel(t._parentMap);t._resx=l;var p=document.createElement("div");p.classList.add("azure-maps-control-container"),p.setAttribute("aria-label",l[0]),p.style.flexDirection="column",p.style.display=r.visible?"":"none",t._container=p;var v=document.createElement("div");v.classList.add("azmaps-overviewMap"),"round"===r.style&&v.classList.add("azmaps-overviewMap-round"),Object.assign(v.style,{height:r.height+"px",width:r.width+"px",backgroundColor:s}),p.appendChild(v),t._mapContainer=v;var c=document.createElement("div");c.classList.add("azmaps-overviewMapDiv"),v.appendChild(c),t._mapDiv=c;var d,m={display:r.showToggle?"":"none",backgroundColor:s},g=90;a&&(d=a.position),d&&"non-fixed"!==d||(d="top-left");var h=-1<d.indexOf("left");g=-1<d.indexOf("top")?(m.bottom="0",h?180:270):(m.top="0",h?90:0),h?m.right="0":m.left="0",m.transform="rotate("+g+"deg)",t._btnRotation=g;var _=document.createElement("button");_.setAttribute("type","button"),_.classList.add("azmaps-overviewMapBtn"),Object.assign(_.style,m),_.addEventListener("click",t._toggle),v.appendChild(_),t._btn=_,t._setBtnState();var u={showLogo:!1,showFeedbackLink:!1,style:r.mapStyle,enableAccessibility:!1};if(t._parentMap){var y=t._parentMap.getStyle();u=Object.assign({},t._parentMap.getServiceOptions(),{language:y.language,view:y.view},u)}else u={language:f.getLanguage(),view:f.getView()};var k=new b.Map(c,u);return(t._overviewMap=k).events.add("ready",function(){try{k.controls.getControls().forEach(function(e){var a=e.container;a&&-1<a.className.indexOf("map-copyright")&&(a.style.display="none")})}catch(e){}k.resize(),t._updateMapUX(),k.sources.add(t._source),k.layers.add(t._layers.polygonLayer),k.layers.add(t._layers.lineLayer);var e=new b.Shape(new b.data.Polygon([]),null,{visible:"area"===r.overlay});t._source.add(e),t._area=e;var a=new b.HtmlMarker(Object.assign({visible:"marker"===r.overlay},r.markerOptions||{}));k.markers.add(a),k.events.add("dragend",a,t._markerdDragged),t._marker=a,t._syncEvents[0]=t._syncMaps.bind(t,t._parentMap),t._syncEvents[1]=t._syncMaps.bind(t,t._overviewMap),t._syncEvents[0](),t._attachEvents()}),p},w.prototype.onRemove=function(){var e=this;e._container&&(e._container.remove(),e._container=null,e._mapContainer=null,e._mapDiv=null,e._btn=null),e._marker&&e._overviewMap&&e._overviewMap.events.add("dragend",e._marker,e._markerdDragged),e._parentMap&&(0===e._options.style.indexOf("auto")&&e._parentMap.events.remove("styledata",e._mapStyleChanged),e._detachEvents(),e._parentMap=null,e._overviewMap=null)},w.prototype._styleColor=function(){var e=this,a="light";if(e._parentMap){var t=e._parentMap.getMapContainer().classList;t.contains("high-contrast-dark")?e._hclStyle="dark":t.contains("high-contrast-light")&&(e._hclStyle="light")}return e._hclStyle?"dark"===e._hclStyle&&(a=e._darkColor):a=e._options.style,"light"===a?a="white":"dark"===a?a=e._darkColor:0===a.indexOf("auto")&&e._parentMap&&(e._parentMap.events.add("styledata",e._mapStyleChanged),a=e._getColorFromMapStyle()),a},w.prototype._getColorFromMapStyle=function(){var e=!1;return-1<["satellite","satellite_road_labels","grayscale_dark","night"].indexOf(this._parentMap.getStyle().style)&&(e=!0),"auto-reverse"===this._options.style?e?"white":this._darkColor:e?this._darkColor:"white"},w.prototype._setBtnState=function(){var e=this,a=e._options,t=e._btn,r="26px",o="26px",n="0",i=e._btnRotation,s=e._resx[2];a.minimized?(i=(i+180)%360,s=e._resx[1]):(n="1",o=a.height+"px",r=a.width+"px"),e._mapContainer&&(e._mapDiv.style.opacity=n,Object.assign(e._mapContainer.style,{height:o,width:r}),e._overviewMap&&(e._resizeStart=performance.now(),e._interval&&clearInterval(e._interval),e._interval=setInterval(e._resize,33)),t.style.transform="rotate("+i+"deg)"),t.setAttribute("title",s),t.setAttribute("alt",s)},w.prototype._updateMapUX=function(){var e=this._overviewMap;if(e){var a=this._options,t=a.syncZoom;e.setUserInteraction({dragRotateInteraction:a.syncBearingPitch,scrollZoomInteraction:t,dblClickZoomInteraction:t,boxZoomInteraction:t,interactive:a.interactive})}},w.prototype._attachEvents=function(){var e=this;e._parentMap&&2<=e._syncEvents.length&&(e._parentMap.events.add("move",e._syncEvents[0]),e._overviewMap.events.add("move",e._syncEvents[1]))},w.prototype._detachEvents=function(){var e=this;e._parentMap&&2<=e._syncEvents.length&&(e._parentMap.events.remove("move",e._syncEvents[0]),e._overviewMap.events.remove("move",e._syncEvents[1]))},w.prototype._syncMaps=function(e){if(e){var a=this,t=a._options,r=a._parentMap,o=a._overviewMap;a._detachEvents();var n=e.getCamera(),i={center:n.center,type:"jump"};t.syncBearingPitch&&(i.bearing=n.bearing,i.pitch=n.pitch),e!==r&&(i.zoom=t.syncZoom?Math.min(Math.max(n.zoom-t.zoomOffset,0),24):t.zoom,r.setCamera(i)),e!==o&&(i.zoom=t.syncZoom?Math.min(Math.max(n.zoom+t.zoomOffset,0),24):t.zoom,t.syncBearingPitch||(i.bearing=0,i.pitch=0),o.setCamera(i)),a._updateOverlay(),a._attachEvents()}},w.prototype._updateOverlay=function(){var e=this,a=e._options;if("area"===a.overlay){var t=e._parentMap.getCanvasContainer().getBoundingClientRect(),r=t.width,o=t.height,n=e._parentMap.pixelsToPositions([[0,0],[r,0],[r,o],[0,o],[0,0]]);e._area.setCoordinates(n)}else"marker"===a.overlay&&e._marker.setOptions({position:e._overviewMap.getCamera().center})},w._getAriaLabel=function(e){var a;a=e?e.getStyle().language:f.getLanguage();var t=w._resx[a.toLowerCase()];return t=t||w._resx.en},w._resx={af:["Oorsig kaart beheer","Uit te brei oorsig kaart","Val oorsig kaart"],ar:["نظرة عامة تحكم خريطة","توسيع الخريطة نظرة عامة","طي خريطة نظرة عامة"],eu:["Orokorra mapa kontrol","Zabaldu ikuspegi mapa","Tolestu ikuspegi mapa"],bg:["Преглед контрол карта","Разширете обзорна карта","Свиване на обзорната карта"],zh:["总览图控制","展开地图概述","关闭总览图"],hr:["Kontrola karta Pregled","Proširite preglednu kartu","Sažmi preglednu kartu"],cs:["Přehled ovládání mapa","Expandovat mapku","Sbalit mapku"],da:["Oversigtskort kontrol","Udvid oversigtskort","Skjul oversigtskort"],nl:["Overzichtskaart controle","Expand overzichtskaart","Collapse overzichtskaart"],et:["Ülevaade Kaart kontrolli","Laienda Ülevaatekaardi","Ahenda Ülevaatekaardi"],fi:["Yleiskuvakartta ohjaus","Laajenna yleiskuvakartta","Romahtaa yleiskuvakartta"],fr:["contrôle Présentation carte","Agrandir la carte Vue d'ensemble","Réduire carte générale"],gl:["control mapa xeral","Expandir mapa xeral","Recoller mapa xeral"],de:["Übersichtskarte Kontrolle","Erweitern Übersichtskarte","Collapse Übersichtskarte"],el:["Επισκόπηση έλεγχο χάρτη","Διεύρυνση χάρτη επισκόπησης","Σύμπτυξη επισκόπηση του χάρτη"],hi:["सिंहावलोकन मानचित्र नियंत्रण","ओवरव्यू मानचित्र को विस्तृत","ओवरव्यू मानचित्र को संकुचित करें"],hu:["Áttekintő térkép ellenőrzés","Nagyítás áttekintő térkép","Összecsukása áttekintő térkép"],id:["peta kendali ikhtisar","Memperluas peta ikhtisar","Perkecil peta ikhtisar"],it:["Panoramica controllo della mappa","Ingrandisci la mappa panoramica","Collapse mappa panoramica"],ja:["概要マップコントロール","概観マップを展開","概観マップを折りたたみます"],kk:["Шолу картасы бақылау","Картаны шолу Expand","Картаны шолу Collapse"],ko:["전체지도 제어","전체지도를 확장","개요지도 축소"],es:["Descripción general del mando mapa","Ampliar el mapa general","Contraer mapa general"],lv:["Pārskata karte kontrole","Izvērst pārskata karti","Sakļaut pārskata karti"],lt:["Apžvalga Žemėlapis kontrolė","Išplėsti apžvalga žemėlapį","Sutraukti apžvalga žemėlapį"],ms:["Gambaran keseluruhan kawalan peta","Buka peta gambaran","Runtuh peta gambaran"],nb:["Oversiktskart kontroll","Utvid oversiktskart","Skjul oversiktskart"],pl:["Przegląd kontrola mapa","Rozwinąć mapę ogólną","Zwinąć mapę ogólną"],pt:["controle mapa geral","Expandir mapa geral","Recolher mapa geral"],ro:["Controlul harta generală","Extindeți harta prezentare generală","Restrângere hartă generală"],ru:["Обзор управления картой","Развернуть обзорную карту","Свернуть обзорную карту"],sr:["Преглед мапа контрола","Проширити преглед карту","Скупи преглед карту"],sk:["Prehľad ovládania mapa","expandovať mapku","zbaliť mapku"],sl:["Pregled nadzor zemljevid","Razširi pregledni zemljevid","Collapse pregledni zemljevid"],sv:["Översiktskarta kontroll","Expandera översiktskarta","Dölj översiktskarta"],th:["การควบคุมแผนที่ภาพรวม","ขยายแผนที่ภาพรวม","ยุบแผนที่ภาพรวม"],tr:["Genel harita kontrolü","Genel bakış haritasını genişlet","Genel bakış haritasını aç"],uk:["Огляд управління картою","Розгорнути оглядову карту","Згорнути оглядову карту"],vi:["kiểm soát Bản đồ toàn cảnh","Mở rộng bản đồ tổng thể","Thu bản đồ tổng thể"],en:["Overview map control","Expand overview map","Collapse overview map"]},w);function w(e){var t=this;this._darkColor="#011c2c",this._hclStyle=null,this._syncEvents=[],this._options={style:"light",zoomOffset:-5,mapStyle:"road",width:150,height:150,syncZoom:!0,syncBearingPitch:!0,overlay:"area",interactive:!0,zoom:1,minimized:!1,showToggle:!0,visible:!0,markerOptions:{},shape:"square"},this._source=new b.source.DataSource,this._layers={lineLayer:new b.layer.LineLayer(this._source,null,{fillColor:"orange",filter:["get","visible"]}),polygonLayer:new b.layer.PolygonLayer(this._source,null,{strokeColor:"orange",filter:["get","visible"]})},this._icon="url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24px' height='24px' viewBox='0 0 24 24'%3E%3Cpath fill='{color}' d='M24 20.5V6.7c0-1.8-1.4-3.256-3.1-3.256-1.708 0-3.098 1.457-3.098 3.256v6.754L5.29.94A3.092 3.092 0 0 0 .908.939a3.097 3.097 0 0 0 0 4.382l12.447 12.446H6.63c-1.825 0-3.303 1.387-3.303 3.1s1.478 3.098 3.303 3.098l14.058-.002c1.826.002 3.305-1.387 3.306-3.096-.001-.045-.014-.083-.016-.128.003-.06.018-.12.018-.18z'/%3E%3C/svg%3E\")",this._btnCss=".azmaps-overviewMap{z-index:200;padding:5px;box-shadow:0px 0px 4px rgba(0,0,0,0.5);border:none;border-collapse:collapse;border-radius:5px;transition:width 0.5s ease-in-out 0s, height 0.5s ease-in-out 0s;background:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32px' height='32px' viewBox='0 0 500 500'%3E%3Cpath stroke='Gray' fill='none' stroke-width='20' d='M249,55a195,195 0 1,0 2,0zm1,0v390m195-195H55 M99,130a260,260 0 0,0 302,0 m0,240 a260,260 0 0,0-302,0 M235,60a250,250 0 0,0 0,382 m30,0 a250,250 0 0,0 0-382'/%3E%3C/svg%3E\") no-repeat center center}.azmaps-overviewMapDiv{position:relative;height:100%;width:100%;transition:opacity 0.5s ease-in-out 0s}.azmaps-overviewMapBtn{position:absolute;margin:0;padding:0;border:none;border-collapse:collapse;width:22px;height:22px;text-align:center;cursor:pointer;line-height:32px;border-radius:5px;z-index:200;background:no-repeat center center;background-image:{icon};background-size:12px;transition:transform 0.5s ease-in-out 0s}.azmaps-overviewMapBtn:hover{background-image:{iconHover}}.azmaps-overviewMap-round{border-radius:50%}.azmaps-overviewMap-round canvas{border-radius:50%}",this._btnRotation=0,this._markerdDragged=function(){var e=t._marker.getOptions().position;t._overviewMap.setCamera({center:e})},this._mapStyleChanged=function(){var e=t;if(e._mapContainer&&e._btn&&!e._hclStyle){var a=e._getColorFromMapStyle();e._mapContainer.style.backgroundColor=a,e._btn.style.backgroundColor=a}},this._toggle=function(){var e=t,a=e._options;a.minimized=!a.minimized,e._setBtnState()},this._resize=function(){var e=t;e._overviewMap.resize(),550<performance.now()-e._resizeStart&&(clearInterval(e._interval),e._interval=null)},e&&this.setOptions(e)}var o=Object.freeze({__proto__:null,OverviewMap:r}),n=a.merge("atlas.control",o);e.control=n}(this.atlas=this.atlas||{},atlas);
