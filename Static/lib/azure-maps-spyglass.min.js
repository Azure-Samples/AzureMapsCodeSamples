/* MIT License - Copyright (c) Microsoft Corporation. */


!function(e){"use strict";var t=(o.prototype.dispose=function(){var e=this;e._detachMapMoveHandlers(),e._options=null,e._spyMap=null,e._primaryMap=null},o.prototype.getOptions=function(){return this._options},o.prototype.setOptions=function(e){var t=this._spyMap,o=t.getCanvasContainer().style,a=t.getMapContainer().style,s=this._options;if("string"!=typeof e.shape||"circle"!==e.shape&&"square"!==e.shape||("circle"===e.shape?(a.borderRadius="50%",o.borderRadius="50%"):(a.borderRadius="0",o.borderRadius="0"),s.shape=e.shape),"number"==typeof e.borderWidth&&(e.borderWidth=Math.max(e.borderWidth,0),a.borderStyle="solid",a.borderWidth=e.borderWidth+"px",s.borderWidth=e.borderWidth),"string"==typeof e.borderColor&&(a.borderColor=e.borderColor,s.borderColor=e.borderColor),"number"==typeof e.opacity&&(e.opacity=Math.max(Math.min(e.opacity,1),0),o.opacity=e.opacity+"",s.opacity=e.opacity),"number"==typeof e.size){e.size=Math.max(e.size,1);var r=e.size/2+s.borderWidth;a.left="calc(50% - "+r+"px)",a.top="calc(50% - "+r+"px)",t.resize(e.size,e.size),s.size=e.size}},o.prototype._attachMapMoveHandlers=function(){var o=this;this._maps.forEach(function(e,t){e.events.add("move",o._syncEvents[t])})},o.prototype._detachMapMoveHandlers=function(){var o=this;this._maps.forEach(function(e,t){e.events.remove("move",o._syncEvents[t])})},o.prototype._synchronizeMaps=function(o){var e=this,t=e._maps.filter(function(e,t){return e!==o});e._detachMapMoveHandlers();var a=o.getCamera();t.forEach(function(e){e.setCamera({center:a.center,zoom:a.zoom,bearing:a.bearing,pitch:a.pitch,type:"jump"})}),e._attachMapMoveHandlers()},o);function o(e,t,o){this._options={borderColor:"#555555",borderWidth:5,opacity:1,shape:"circle",size:350},this._syncEvents=[],this._maps=[];var a=this;a._primaryMap=e,a._spyMap=t;var s=a._spyMap.getMapContainer();s.style.position="absolute",a._spyMap.events.add("ready",function(){s.getElementsByClassName("azure-map-logo")[0].style.display="none",s.getElementsByClassName("map-copyright")[0].style.display="none"}),a.setOptions(a._options),o&&a.setOptions(o),a._maps=[a._primaryMap,a._spyMap],a._maps.forEach(function(e,t){a._syncEvents[t]=a._synchronizeMaps.bind(a,e)}),a._syncEvents[0](),a._attachMapMoveHandlers()}e.Spyglass=t}(this.atlas=this.atlas||{});
