/* MIT License - Copyright (c) Microsoft Corporation. */


!function(e,p){"use strict";var o=function(){return(o=Object.assign||function(e){for(var t,a=1,r=arguments.length;a<r;a++)for(var s in t=arguments[a])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)},t=(a.merge=function(e,t){for(var a=window||global,r=0,s=e.split(".");r<s.length;r++){var n=s[r];if(!a[n])return t;a=a[n]}return o(o({},a),t)},a);function a(){}var r=(s.prototype.onAdd=function(e,t){var a=this;a._map=e;var r=document.createElement("style");r.innerHTML=".azmaps-scaleBar {background-color:rgba(255,255,255,0.8);font-size:10px;border-width:medium 2px 2px;border-style:none solid solid;border-color:black;padding:0 5px;color:black;}",document.body.appendChild(r);var s=document.createElement("div");return s.className="azmaps-scaleBar",a._scaleBar=s,a._map.events.add("move",a._updateScaleBar),a._updateScaleBar(),s},s.prototype.onRemove=function(){var e=this;e._map&&e._map.events.remove("move",e._updateScaleBar),e._map=null,e._scaleBar.remove(),e._scaleBar=null},s.prototype._getRoundNumber=function(e){if(2<=e){var t=Math.pow(10,(Math.floor(e)+"").length-1),a=e/t;return t*(a=10<=a?10:5<=a?5:3<=a?3:2<=a?2:1)}return Math.round(100*e)/100},s.prototype._createDistanceString=function(e,t){if(this._options.units)switch(this._options.units.toLowerCase()){case"feet":case"foot":case"ft":return e+" ft";case"kilometers":case"kilometer":case"kilometres":case"kilometre":case"km":case"kms":return e+" km";case"miles":case"mile":case"mi":return e+" mi";case"nauticalmiles":case"nauticalmile":case"nms":case"nm":return e+" nm";case"yards":case"yard":case"yds":case"yrd":case"yrds":return e+" yds";case"metric":return t?e+" m":e+" km";case"imperial":return t?e+" ft":e+" mi";case"meters":case"metres":case"m":default:return e+" m"}},s);function s(e){var u=this;this._map=null,this._scaleBar=null,this._options={units:"imperial",maxBarLength:100},this._updateScaleBar=function(){var e=u,t=e._map.getCamera(),a=e._options,r=e._map.pixelsToPositions([t.center]),s=e._map.pixelsToPositions([[0,r[0][1]],[a.maxBarLength,r[0][1]]]),n=a.units.toLowerCase();"imperial"===n?n="miles":"metric"===n&&(n="kilometers");var o=p.math.getDistanceTo(s[0],s[1],n),i=e._getRoundNumber(o),c=!1;i<2&&("imperial"===(n=a.units.toLowerCase())?(o*=5280,i=e._getRoundNumber(o),c=!0):"metric"===n&&(o*=1e3,i=e._getRoundNumber(o),c=!0));var l=i/o,m=e._scaleBar;m.style.width=a.maxBarLength*l+"px",m.innerHTML=e._createDistanceString(i,c)},this._options=Object.assign(this._options,e||{})}var n=Object.freeze({__proto__:null,ScaleBarControl:r}),i=t.merge("atlas.control",n);e.control=i}(this.atlas=this.atlas||{},atlas);
